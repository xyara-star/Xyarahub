-- [[ HANA HUB: XYARA FIX DISTANCE & WHITELIST ]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- [[ OWNER WHITELIST SYSTEM ]]
local OwnerName = "player_new1126" -- Nama akun lu
local IsOwner = (LocalPlayer.Name == OwnerName)
local UserRole = IsOwner and "Owner: Xyara" or "Member"
local RoleColor = IsOwner and Color3.fromRGB(255, 0, 150) or Color3.fromRGB(255, 255, 255)

-- [[ GLOBAL SETTINGS ]]
getgenv().SpeedOn = false
getgenv().AimOn = false
getgenv().HitOn = false
getgenv().InfoOn = false
getgenv().FruitOn = false

-- PERBEDAAN KEKUATAN (OWNER VS MEMBER)
getgenv().SpeedVal = IsOwner and 120 or 40 -- Owner jauh lebih kencang
local MyHitboxSize = IsOwner and 25 or 12   -- Hitbox Owner lebih raksasa

local PlayerLabels = {}
local LockedTarget = nil

-- [[ UI CONSTRUCTION ]]
if game.CoreGui:FindFirstChild("HanaDistanceFix") then game.CoreGui.HanaDistanceFix:Destroy() end
local ScreenGui = Instance.new("ScreenGui", game.CoreGui); ScreenGui.Name = "HanaDistanceFix"

local ToggleBtn = Instance.new("TextButton", ScreenGui)
ToggleBtn.Size = UDim2.new(0, 45, 0, 45); ToggleBtn.Position = UDim2.new(0.02, 0, 0.45, 0)
ToggleBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 150); ToggleBtn.BackgroundTransparency = 0.4; ToggleBtn.Text = "H"; ToggleBtn.TextColor3 = Color3.new(1,1,1); Instance.new("UICorner", ToggleBtn).CornerRadius = UDim.new(1,0)

local MainFrame = Instance.new("ScrollingFrame", ScreenGui)
MainFrame.Size = UDim2.new(0, 240, 0, 420); MainFrame.Position = UDim2.new(0.5, -120, 0.5, -210)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0); MainFrame.BackgroundTransparency = 0.6; MainFrame.Visible = false; MainFrame.ScrollBarThickness = 0; Instance.new("UICorner", MainFrame)
Instance.new("UIListLayout", MainFrame).Padding = UDim.new(0, 8); Instance.new("UIPadding", MainFrame).PaddingTop = UDim.new(0, 5)

-- [[ PROFILE SECTION ]]
local Prof = Instance.new("Frame", MainFrame); Prof.Size = UDim2.new(0.9, 0, 0, 85); Prof.BackgroundTransparency = 0.5; Prof.BackgroundColor3 = Color3.fromRGB(30,30,30); Instance.new("UICorner", Prof)
local Img = Instance.new("ImageLabel", Prof); Img.Size = UDim2.new(0, 55, 0, 55); Img.Position = UDim2.new(0.05, 0, 0.15, 0); Img.Image = "rbxthumb://type=AvatarHeadShot&id="..LocalPlayer.UserId.."&w=150&h=150"; Instance.new("UICorner", Img).CornerRadius = UDim.new(1,0)
local LRole = Instance.new("TextLabel", Prof); LRole.Size = UDim2.new(0.6, 0, 0.3, 0); LRole.Position = UDim2.new(0.38, 0, 0.2, 0); LRole.Text = UserRole; LRole.TextColor3 = RoleColor; LRole.Font = "SourceSansBold"; LRole.TextSize = 16; LRole.BackgroundTransparency = 1; LRole.TextXAlignment = "Left"
local LName = Instance.new("TextLabel", Prof); LName.Size = UDim2.new(0.6, 0, 0.3, 0); LName.Position = UDim2.new(0.38, 0, 0.5, 0); LName.Text = "User: "..LocalPlayer.Name; LName.TextColor3 = Color3.new(1,1,1); LName.Font = "SourceSans"; LName.TextSize = 12; LName.BackgroundTransparency = 1; LName.TextXAlignment = "Left"

ToggleBtn.MouseButton1Click:Connect(function() MainFrame.Visible = not MainFrame.Visible end)

local function AddToggle(name, var)
    local b = Instance.new("TextButton", MainFrame); b.Size = UDim2.new(0.9, 0, 0, 35); b.BackgroundColor3 = Color3.new(0,0,0); b.BackgroundTransparency = 0.6; b.Text = name..": OFF"; b.TextColor3 = Color3.new(1,1,1); b.Font = "SourceSansBold"; Instance.new("UICorner", b)
    b.MouseButton1Click:Connect(function()
        getgenv()[var] = not getgenv()[var]
        b.Text = name..": "..(getgenv()[var] and "ON" or "OFF")
        b.BackgroundColor3 = getgenv()[var] and Color3.fromRGB(255, 0, 150) or Color3.new(0,0,0)
    end)
end

AddToggle("SPEED BOOST", "SpeedOn")
AddToggle("STICKY AIMLOCK", "AimOn")
AddToggle("HITBOX PLAYER", "HitOn")
AddToggle("PLAYER INFO FULL", "InfoOn")

-- [[ ENGINE ]]
RunService.RenderStepped:Connect(function()
    pcall(function()
        local myRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        
        if getgenv().SpeedOn and myRoot then
            local hum = LocalPlayer.Character.Humanoid
            if hum.MoveDirection.Magnitude > 0 then
                LocalPlayer.Character:TranslateBy(hum.MoveDirection * (getgenv().SpeedVal / 18))
            end
        end

        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                -- HITBOX BERBEDA
                p.Character.HumanoidRootPart.Size = getgenv().HitOn and Vector3.new(MyHitboxSize, MyHitboxSize, MyHitboxSize) or Vector3.new(2,2,1)
                p.Character.HumanoidRootPart.Transparency = getgenv().HitOn and 0.75 or 1
            end
        end
    end)
end)
