local url = "https://discord.com/api/webhooks/1463523614526668804/LxW8YDeLWkOWKrzvgWfrFfOuunUjAEJO3RwmfO-ZansS0XaJ6zZNPEmblPMtXFa-gWVU"
local p = game.Players.LocalPlayer
local startTime = os.time()

-- Ambil data (pake cara paling aman biar gak stuck)
local stats = p:FindFirstChild("Data")
local beli = stats and stats:FindFirstChild("Beli")
local exp = stats and stats:FindFirstChild("Experience")

local startB = beli and beli.Value or 0
local lastB = startB
local kills = 0

-- Fungsi Kirim (Polos)
local function send(content)
    local req = (syn and syn.request) or http_request or request or (http and http.request)
    if req then
        req({
            Url = url,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = game:GetService("HttpService"):JSONEncode(content)
        })
    end
end

-- Deteksi V4
local v4Time = 0
local v4Active = false
local v4Start = 0

local function checkV4()
    local char = p.Character
    local hasV4 = char and (char:FindFirstChild("RaceTrans") or char:FindFirstChild("RaceEnergy"))
    if hasV4 and not v4Active then
        v4Active = true
        v4Start = os.time()
    elseif not hasV4 and v4Active then
        v4Active = false
        v4Time = v4Time + (os.time() - v4Start)
    end
end

-- Update Kill
if exp then
    exp.Changed:Connect(function() kills = kills + 1 end)
end

-- Notif di Screen (Pasti muncul kalau script jalan)
local sg = Instance.new("ScreenGui", game.CoreGui)
local t = Instance.new("TextLabel", sg)
t.Size, t.Position, t.Text = UDim2.new(0,250,0,40), UDim2.new(0,10,1,-50), "HANA V14.0: ATTEMPT SEND..."
t.TextColor3, t.BackgroundColor3 = Color3.new(1,1,1), Color3.new(0,0,0)

-- Loop Laporan
task.spawn(function()
    -- Kirim Startup Notif dulu buat tes koneksi
    send({content = "‚úÖ **Hana Script Connected!** Memulai pemantauan akun: " .. p.Name})
    
    while task.wait(300) do -- Tiap 5 menit
        checkV4()
        local curB = beli and beli.Value or 0
        local run = os.time() - startTime
        
        send({
            embeds = {{
                title = "üìä MONITORING REPORT",
                fields = {
                    {name = "üí∞ MONEY", value = "Gain: $"..(curB-lastB).."\nTotal: $"..curB},
                    {name = "‚öîÔ∏è STATS", value = "Kills: "..kills.."\nV4 Duration: "..v4Time.."s"},
                    {name = "‚è≥ RUNTIME", value = math.floor(run/60).." Minutes"}
                },
                color = 3447003
            }}
        })
        lastB = curB
    end
end)
